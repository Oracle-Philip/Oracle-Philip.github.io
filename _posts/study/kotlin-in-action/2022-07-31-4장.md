---
layout: post
title: '[Kotlin-in-action] 4ì¥ í´ë˜ìŠ¤, ê°ì²´, ì¸í„°í˜ì´ìŠ¤'
subtitle: kotlin in action
date: '2022-07-31 12:45:51 +0900'
categories:
    - study
    - kotlin-in-action
tags:
    - kotlin
comments: true
published: true
---

# 4ì¥ í´ë˜ìŠ¤, ê°ì²´, ì¸í„°í˜ì´ìŠ¤

<aside>
ğŸ’¡ ìë°”ì™€ ë‹¬ë¦¬ ì¸í„°í˜ì´ìŠ¤ì— í”„ë¡œí¼í‹° ì„ ì–¸ì´ ë“¤ì–´ê°ˆ ìˆ˜ ìˆë‹¤.

</aside>

<aside>
ğŸ’¡ ìë°”ì™€ ë‹¬ë¦¬ ê¸°ë³¸ ì„ ì–¸ì´ finalì´ë©° publicì´ë‹¤.

</aside>

<aside>
ğŸ’¡ ì¤‘ì²©í´ë˜ìŠ¤ëŠ” ê¸°ë³¸ì ìœ¼ë¡œ ë‚´ë¶€ í´ë˜ìŠ¤ê°€ ì•„ë‹ˆë‹¤.

</aside>

<aside>
ğŸ’¡ ì½”í‹€ë¦° ì¤‘ì²© í´ë˜ìŠ¤ì—ëŠ” ì™¸ë¶€ í´ë˜ìŠ¤ì— ëŒ€í•œ ì°¸ì¡°ê°€ ì—†ë‹¤.

</aside>

<aside>
ğŸ’¡ í´ë˜ìŠ¤ë¥¼ dataë¡œ ì„ ì–¸í•˜ë©´ ì»´íŒŒì¼ëŸ¬ê°€ ì¼ë¶€ í‘œì¤€ ë©”ì†Œë“œë¥¼ ìƒì„±í•´ì¤€ë‹¤.

</aside>

<aside>
ğŸ’¡ ì½”í‹€ë¦° ì–¸ì–´ê°€ ì œê³µí•˜ëŠ” ìœ„ì„(delegation)ì„ ì‚¬ìš©í•˜ë©´ ìœ„ì„ì„ ì²˜ë¦¬í•˜ê¸° ìœ„í•œ ì¤€ë¹„ ë©”ì†Œë“œë¥¼ ì§ì ‘ ì‘ì„±í•  í•„ìš”ê°€ ì—†ë‹¤.

</aside>

<aside>
ğŸ’¡ ì‹±ê¸€í„´ í´ë˜ìŠ¤, ë™ë°˜ê°ì²´(companion object), ê°ì²´ ì‹(object expressionâ† ìë°”ì˜ anonymous class )ì„ í‘œí˜„í•  ë•Œ object í‚¤ì›Œë“œë¥¼ ì“´ë‹¤.

</aside>

<aside>
ğŸ’¡ sealead ë³€ê²½ìëŠ” í´ë˜ìŠ¤ ìƒì†ì„ ì œí•œí•œë‹¤.

</aside>

# ì½”í‹€ë¦° ì¸í„°í˜ì´ìŠ¤

```kotlin
interface Clickalble{
    fun click()
}

class Button : Clickalble {
    **override** fun click() = println("I was clicked")
}

fun main(args: Array<String>){
    Button().click()
}
```

```kotlin
interface Clickalble{
    fun click()
    fun showOff() =println("I'm clickable!")
}

interface Focusable {
    fun setFocus(b: Boolean) = println("i ${if (b) "got" else "lost"} focus.")
    fun showOff() =println("I'm focusable!")
}

class Button : Clickalble, Focusable {
    override fun click() =println("I was clicked")
    override fun showOff() {
        super<Clickalble>.showOff()
        super<Focusable>.showOff()
    }
}

fun main(args: Array<String>){
    Button().click()
    Button().showOff()
    Button().setFocus(false)
}
```

# í´ë˜ìŠ¤ ìƒì†ì œì–´ ë³€ê²½ì

open, final, abstract ë³€ê²½ì : ê¸°ë³¸ì ìœ¼ë¡œ final

finalë¡œ ìƒì†ì„ ê¸ˆì§€í•˜ì§€ ì•ŠëŠ” í´ë˜ìŠ¤ì— ê²½ìš° ë‹¤ë¥¸ í´ë˜ìŠ¤ê°€ ìƒì†í•  ìˆ˜ ìˆì§€ë§Œ, ì·¨ì•½í•œ ê¸°ë°˜ í´ë˜ìŠ¤(fragile base class) ë¬¸ì œê°€ ìƒê¸¸ ìˆ˜ ìˆë‹¤. í•˜ìœ„í´ë˜ìŠ¤ê°€ ê¸°ë°˜ í´ë˜ìŠ¤ì— ëŒ€í•´ ê°€ì¡Œë˜ ê°€ì •ì´ ê¸°ë°˜ í´ë˜ìŠ¤ë¥¼ ë³€ê²½í•¨ìœ¼ë¡œì¨ ê¹¨ì ¸ë²„ë¦° ê²½ìš°ì´ë‹¤. ì´ ë•Œë¬¸ì— ì¡°ìŠˆì•„ ë¸”ë¡œí¬(Effective java ì €ì)ëŠ” â€œìƒì†ì„ ìœ„í•œ ì„¤ê³„ì™€ ë¬¸ì„œë¥¼ ê°–ì¶”ê±°ë‚˜, ê·¸ëŸ´ ìˆ˜ ì—†ë‹¤ë©´ ìƒì†ì„ ê¸ˆì§€í•˜ë¼"ëŠ” ì¡°ì–¸ì„ í•œë‹¤. ì½”í‹€ë¦°ì€ ê·¸ëŸ¬í•œ ì² í•™ì„ ë”°ë¥´ê³ , ìƒì†ì„ í—ˆìš©í•˜ëŠ” í´ë˜ìŠ¤ë¥¼ ì„ ì–¸í•˜ë ¤ë©´ open ë³€ê²½ìë¥¼ ë¶™í˜€ì•¼í•œë‹¤.(ë©”ì†Œë“œë‚˜ í”„ë¡œí¼í‹°ì— ëŒ€í•´ì„œë„ ë§ˆì°¬ê°€ì§€ë¡œ openì„ ë¶™í˜€ì•¼ í•œë‹¤)

```kotlin
open class RichButton : Clickalble {
    fun disable(){} <-- ì´ í•¨ìˆ˜ëŠ” finalì´ë‹¤. í•˜ìœ„ í´ë˜ìŠ¤ê°€ ì´ ë©”ì†Œë“œë¥¼ ì˜¤ë²„ë¼ì´ë“œ í•  ìˆ˜ ì—†ë‹¤.
    open fun animate(){} <-- ì´ í•¨ìˆ˜ëŠ” ì—´ë ¤ìˆë‹¤. í•˜ìœ„ í´ë˜ìŠ¤ì—ì„œ ì´ ë©”ì†Œë“œë¥¼ ì˜¤ë²„ë¼ì´ë“œ í•  ìˆ˜ ìˆë‹¤.
    override fun click() {} <-- ì´ í•¨ìˆ˜ëŠ” (ìƒìœ„í´ë˜ìŠ¤ì—ì„œ ì„ ì–¸ëœ) ì—´ë ¤ìˆëŠ” ë©”ì†Œë“œë¥¼ ì˜¤ë²„ë¼ì´ë“œí•œë‹¤. ì˜¤ë²„ë¼ì´ë“œí•œ ë©”ì†Œë“œëŠ” ê¸°ë³¸ì ìœ¼ë¡œ ì—´ë ¤ìˆë‹¤.
}
```

```kotlin
open class RichButton : Clickalble {
    fun disable(){}
    open fun animate(){}
    **final** override fun click() {} <-- í•˜ìœ„í´ë˜ìŠ¤ê°€ ì˜¤ë²„ë¼ì´ë“œ ëª»í•˜ê²Œí•˜ë ¤ë©´ finalì„ ë¶™íŒë‹¤.
}
```

ìë°”ì²˜ëŸ¼ ì½”í‹€ë¦°ì—ì„œë„ í´ë˜ìŠ¤ë¥¼ abstractë¡œ ì„ ì–¸í•  ìˆ˜ ìˆë‹¤. **abstractë¡œ ì„ ì–¸í•œ ì¶”ìƒ í´ë˜ìŠ¤ëŠ” ì¸ìŠ¤í„´ìŠ¤í™”í• ìˆ˜ ì—†ë‹¤.**

![](https://velog.velcdn.com/images/philipy/post/4ee85471-93e4-410c-b5c7-dd69970c2e15/image.png)


ì¶”ìƒ í´ë˜ìŠ¤ì—ëŠ” êµ¬í˜„ì´ ì—†ëŠ” ì¶”ìƒ ë©¤ë²„ê°€ ìˆê¸° ë•Œë¬¸ì— í•˜ìœ„ í´ë˜ìŠ¤ì—ì„œ ê·¸ ì¶”ìƒ ë©¤ë²„ë¥¼ ì˜¤ë²„ë¼ì´ë“œí•´ì•¼ë§Œ í•œë‹¤. ì¶”ìƒ ë©¤ë²„ëŠ” í•­ìƒ ì—´ë ¤ìˆë‹¤. ë”°ë¼ì„œ open ë³€ê²½ìë¥¼ ëª…ì‹œí•  í•„ìš” ì—†ë‹¤.

### í´ë˜ìŠ¤ ë‚´ì—ì„œ ìƒì† ì œì–´ ë³€ê²½ìì˜ ì˜ë¯¸

| ë³€ê²½ì | ì´ ë³€ê²½ì ë¶™ì€ ë©¤ë²„ëŠ” | ì„¤ëª… |
| --- | --- | --- |
| final | ì˜¤ë²„ë¼ì´ë“œ X | í´ë˜ìŠ¤ ë©¤ë²„ì˜ ê¸°ë³¸ ë³€ê²½ìì´ë‹¤. |
| open | ì˜¤ë²„ë¼ì´ë“œ O | ë°˜ë“œì‹œ openì„ ëª…ì‹œí•´ì•¼ ì˜¤ë²„ë¼ì´ë“œ í•  ìˆ˜ ìˆë‹¤. |
| abstract | ë°˜ë“œì‹œ ì˜¤ë²„ë¼ì´ë“œ í•´ì•¼í•¨ | ì¶”ìƒ í´ë˜ìŠ¤ì˜ ë©¤ë²„ì—ë§Œ ì´ ë³€ê²½ìë¥¼ ë¶™ì¼ ìˆ˜ ìˆë‹¤. ì¶”ìƒ ë©¤ë²„ì—ëŠ” êµ¬í˜„ì´ ìˆìœ¼ë©´ ì•ˆëœë‹¤. |
| override | ìƒìœ„ í´ë˜ìŠ¤ë‚˜ ìƒìœ„ ì¸ìŠ¤í„´ìŠ¤ì˜ ë©¤ë²„ë¥¼ ì˜¤ë²„ë¼ì´ë“œí•˜ëŠ”ì¤‘ | ì˜¤ë²„ë¼ì´ë“œí•˜ëŠ” ë©¤ë²„ëŠ” ê¸°ë³¸ì ìœ¼ë¡œ ì—´ë ¤ìˆë‹¤. í•˜ìœ„ í´ë˜ìŠ¤ì˜ ì˜¤ë²„ë¼ì´ë“œë¥¼ ê¸ˆì§€í•˜ë ¤ë©´ finalì„ ëª…ì‹œí•´ì•¼ í•œë‹¤. |

# í´ë˜ìŠ¤ ê°€ì‹œì„± ë³€ê²½ì

ìë°”ì™€ ê°™ì€ public, protected, private ë³€ê²½ìê°€ ìˆê³ , ê¸°ë³¸ ê°€ì‹œì„±ì€ publicì´ë‹¤. ì½”í‹€ë¦°ì€ ìë°”ì™€ ë‹¬ë¦¬ package-privateë¥¼ ë„¤ì„ìŠ¤í˜ì´ìŠ¤ë¥¼ ê´€ë¦¬í•˜ê¸° ìœ„í•œ ìš©ë„ë¡œë§Œ ì‚¬ìš©í•´ ê°€ì‹œì„± ì œì–´ì— ì‚¬ìš©í•˜ì§€ ì•ŠëŠ”ë‹¤. íŒ¨í‚¤ì§€ ì „ìš© ê°€ì‹œì„±ì— ëŒ€í•œ ëŒ€ì•ˆìœ¼ë¡œ ì½”í‹€ë¦°ì—ëŠ” internalì´ë¼ëŠ” ìƒˆë¡œìš´ ê°€ì‹œì„± ë³€ê²½ìë¥¼ ë„ì…í–ˆë‹¤.

â†’ ìš°ë¦¬ë§ë¡œëŠ” ëª¨ë“ˆ ë‚´ë¶€ë¼ê³  ë²ˆì—­í•˜ë©°, ëª¨ë“ˆ ë‚´ë¶€ì—ì„œë§Œ ë³¼ ìˆ˜ ìˆë‹¤ëŠ” ì˜ë¯¸ì´ë‹¤.

â†’ ëª¨ë“ˆì€ í•œë²ˆì— í•œêº¼ë²ˆì— ì»´íŒŒì¼ë˜ëŠ” ì½”í‹€ë¦° íŒŒì¼ë“¤ì„ ì˜ë¯¸í•œë‹¤.

| ë³€ê²½ì | í´ìƒˆìŠ¤ ë©¤ë²„ | ìµœìƒìœ„ ì„ ì–¸ |
| --- | --- | --- |
| public(ê¸°ë³¸ ê°€ì‹œì„±) | ëª¨ë“  ê³³ì—ì„œ ë³¼ ìˆ˜ ìˆë‹¤. | ëª¨ë“  ê³³ì—ì„œ ë³¼ ìˆ˜ ìˆë‹¤. |
| internal | ê°™ì€ ëª¨ë“ˆ ì•ˆì—ì„œë§Œ ë³¼ ìˆ˜ ìˆë‹¤. | ê°™ì€ ëª¨ë“ˆ ì•ˆì—ì„œë§Œ ë³¼ ìˆ˜ ìˆë‹¤. |
| protected | í•˜ìœ„ í´ë˜ìŠ¤ ì•ˆì—ì„œë§Œ ë³¼ ìˆ˜ ìˆë‹¤. | (ìµœìƒìœ„ ì„ ì–¸ì— ì ìš©í•  ìˆ˜ ì—†ìŒ) |
| private | ê°™ì€ í´ë˜ìŠ¤ ì•ˆì—ì„œë§Œ ë³¼ ìˆ˜ ìˆë‹¤. | ê°™ì€ íŒŒì¼ ì•ˆì—ì„œë§Œ ë³¼ ìˆ˜ ìˆë‹¤. |

![](https://velog.velcdn.com/images/philipy/post/be701675-6a2a-483a-811e-ab5aa05e5795/image.png)


public ë©¤ë²„ê°€ ìì‹ ì˜ internal ìˆ˜ì‹  íƒ€ì…ì¸ TalkativeButtonì„ ë…¸ì¶œí•˜ì—¬ errorê°€ ë°œìƒí–ˆë‹¤. giveSpeech í™•ì¥í•¨ìˆ˜ì˜ ê°€ì‹œì„±ì„ internalë¡œ ë°”ê¾¸ê±°ë‚˜ TalkativeButton í´ë˜ìŠ¤ì˜ ê°€ì‹œì„±ì„ publicìœ¼ë¡œ ë°”ê¿”ì•¼ í•œë‹¤.

ì½”í‹€ë¦°ê³¼ ìë°” ê°€ì‹œì„± ê·œì¹™ì˜ ë˜ ë‹¤ë¥¸ ì°¨ì´ëŠ” ì½”í‹€ë¦°ì—ì„œëŠ” ì™¸ë¶€ í´ë˜ìŠ¤ê°€ ë‚´ë¶€ í´ë˜ìŠ¤ë‚˜ ì¤‘ì²©ëœ í´ë˜ìŠ¤ì˜ private ë©¤ë²„ì— ì ‘ê·¼í•  ìˆ˜ ì—†ë‹¤ëŠ” ì ì´ë‹¤. ë‚´ë¶€ í´ë˜ìŠ¤ì™€ ì¤‘ì²©ëœ í´ë˜ìŠ¤ì˜ ì˜ˆë¥¼ í†µí•´ ì•Œ ìˆ˜ ìˆë‹¤.

### ì¤‘ì²©í´ë˜ìŠ¤

ìë°”ì™€ì˜ ì°¨ì´ëŠ” ì½”í‹€ë¦°ì˜ ì¤‘ì²© í´ë˜ìŠ¤(nested class)ëŠ” ëª…ì‹œì ìœ¼ë¡œ ìš”ì²­í•˜ì§€ ì•ŠëŠ” í•œ ë°”ê¹¥ìª½ í´ë˜ìŠ¤ ì¸ìŠ¤í„´ìŠ¤ì— ëŒ€í•œ ì ‘ê·¼ ê¶Œí•œì´ ì—†ë‹¤.

```java
public class Button implements View{
    @NonNull
    @Override
    public State getCurrentState() {
        return new ButtonState();
    }

    @Override
    public void restoreState(@NonNull State state) {

    }

    public class ButtonState implements State{

    }
}
```

```kotlin
interface State : Serializable

interface View {
    fun getCurrentState(): State
    fun restoreState(state: State){}
}

class MainActivity : AppCompatActivity() {
    override fun onCreate(savedInstanceState: Bundle?) {
        super.onCreate(savedInstanceState)
        setContentView(R.layout.activity_main)

        val buttonState = Button().getCurrentState()
        var serializedState: ByteArray

        ByteArrayOutputStream().use{baos->
					ObjectOutputStream(baos).use{oos->
							oos.writeObject(buttonState)
                // serializedMember -> ì§ë ¬í™”ëœ member ê°ì²´
                serializedState = baos.toByteArray()
					}
        }
		}
}
```

![](https://velog.velcdn.com/images/philipy/post/db2785d4-5ba2-4d48-9522-85027ebdc70b/image.png)


ìë°”ì—ì„œ ë‹¤ë¥¸ í´ë˜ìŠ¤ ì•ˆì— ì •ì˜ëœ í´ë˜ìŠ¤ëŠ” ìë™ìœ¼ë¡œ inner classê°€ ë˜ê³ , ë°”ê¹¥ìª½ Button í´ë˜ìŠ¤ì— ëŒ€í•œ ì°¸ì¡°ë¥¼ í¬í•¨í•œë‹¤. ì´ë•Œ, ê·¸ ì°¸ì¡°ê°€ ì§ë ¬í™”ë¥¼ ë°©í•´í•œë‹¤. ë”°ë¼ì„œ, ButtonState í´ë˜ìŠ¤ë¥¼ staticìœ¼ë¡œ ì„ ì–¸í•´ì•¼ í•œë‹¤. (ì°¸ì¡°ê°€ ì‚¬ë¼ì§„ë‹¤)

```kotlin
public class Button implements View{
    @NonNull
    @Override
    public State getCurrentState() {
        return new ButtonState();
    }

    @Override
    public void restoreState(@NonNull State state) {

    }

    public static class ButtonState implements State{

    }
}
```

ì½”í‹€ë¦° ì¤‘ì²© í´ë˜ìŠ¤ì— ì•„ë¬´ëŸ° ë³€ê²½ìê°€ ë¶™ì§€ ì•Šìœ¼ë©´ ìë°” static ì¤‘ì²© í´ë˜ìŠ¤ì™€ ê°™ë‹¤. ì´ë¥¼ ë‚´ë¶€ í´ë˜ìŠ¤ë¡œ ë³€ê²½í•´ì„œ ë°”ê¹¥ìª½ í´ë˜ìŠ¤ì— ëŒ€í•œ ì°¸ì¡°ë¥¼ í¬í•¨í•˜ê²Œ ë§Œë“¤ê³  ì‹¶ë‹¤ë©´ inner ë³€ê²½ìë¥¼ ë¶™ì—¬ì•¼ í•œë‹¤.

**â†’ ì½”í‹€ë¦°ì—ì„œëŠ” ì¤‘ì²© í´ë˜ìŠ¤ì— ì•„ë¬´ëŸ° ë³€ê²½ìê°€ ë¶™ì§€ ì•Šìœ¼ë©´ ìë°” static ì¤‘ì²© í´ë˜ìŠ¤ì™€ ê°™ë‹¤.**

ìë°”ì™€ ì½”í‹€ë¦°ì˜ ì¤‘ì²© í´ë˜ìŠ¤ì™€ ë‚´ë¶€ í´ë˜ìŠ¤ì˜ ê´€ê³„

| í´ë˜ìŠ¤ B ì•ˆì— ì •ì˜ëœ í´ë˜ìŠ¤ A | ìë°”ì—ì„œëŠ” | ì½”í‹€ë¦°ì—ì„œëŠ” |
| --- | --- | --- |
| ì¤‘ì²© í´ë˜ìŠ¤(ë°”ê¹¥ìª½ í´ë˜ìŠ¤ì— ëŒ€í•œ ì°¸ì¡°ë¥¼ ì €ì¥í•˜ì§€ ì•ŠìŒ) | static class A | class A |
| ë‚´ë¶€ í´ë˜ìŠ¤(ë°”ê¹¥ìª½ í´ë˜ìŠ¤ì— ëŒ€í•œ ì°¸ì¡°ë¥¼ ì €ì¥í•¨) | class A | inner class A |

![](https://velog.velcdn.com/images/philipy/post/97508cd4-21ef-40e0-abc8-1f85f3fcf3ae/image.jpg)


```kotlin
class Outer{
    inner class Inner{
        fun getOuterReference(): Outer = this@Outer
    }
}
```

# ë´‰ì¸ëœ í´ë˜ìŠ¤ : í´ë˜ìŠ¤ ê³„ì¸µ ì •ì˜ ì‹œ ê³„ì¸µ í™•ì¥ ì œí•œ

sealed í´ë˜ìŠ¤ëŠ” ê·¸ ìƒìœ„ í´ë˜ìŠ¤ë¥¼ ìƒì†í•œ í•˜ìœ„ í´ë˜ìŠ¤ ì •ì˜ë¥¼ ì œí•œí•  ìˆ˜ ìˆë‹¤. sealed í´ë˜ìŠ¤ì˜ í•˜ìœ„ í´ë˜ìŠ¤ë¥¼ ì •ì˜í•  ë•ŒëŠ” ë°˜ë“œì‹œ ìƒìœ„ í´ë˜ìŠ¤ ì•ˆì— ì¤‘ì²©ì‹œì¼œì•¼ í•œë‹¤. sealed í´ë˜ìŠ¤ë¥¼ ì‚¬ìš©í•¨ìœ¼ë¡œì¨ when ì‹ì—ì„œ ë””í´íŠ¸ ë¶„ê¸°(else ë¶„ê¸°)ê°€ í•„ìš”ì—†ë‹¤.

![](https://velog.velcdn.com/images/philipy/post/04f06221-1153-442b-9654-b7f85dc51dd0/image.jpg)


# í”„ë¡œí¼í‹°ë¥¼ ê°–ëŠ” í´ë˜ìŠ¤ ì„ ì–¸

ì½”í‹€ë¦°ì—ëŠ” ì£¼(primary) ìƒì„±ì, ë¶€(secondary) ìƒì„±ì, ì´ˆê¸°í™” ë¸”ë¡ì— ë°©ë²•ì´ ìˆë‹¤.

- ì£¼ ìƒì„±ìëŠ” í´ë˜ìŠ¤ ì´ë¦„ ë’¤ì— ê´„í˜¸ë¡œ ë‘˜ëŸ¬ì‹¸ ì„ ì–¸í•  ìˆ˜ ìˆë‹¤. ì˜ˆ) `class User(val nickname: String)`
    - ì£¼ ìƒì„±ìëŠ” ìƒì„±ì íŒŒë¼ë¯¸í„°ë¥¼ ì§€ì •í•˜ê³ , ê·¸ ìƒì„±ì íŒŒë¼ë¯¸í„°ì— ì˜í•´ ì´ˆê¸°í™”ë˜ëŠ” í”„ë¡œí¼í‹°ë¥¼ ì •ì˜í•˜ëŠ” ë‘ ê°€ì§€ ëª©ì ìœ¼ë¡œ ì“°ì¸ë‹¤.

  ì˜ˆ)

    ```kotlin
    class User_ constructor(_nickname: String){
        val nickname: String
        init {
            nickname = _nickname
        }
    }
    ```

    - constructorí‚¤ì›Œë“œëŠ” ì£¼ ìƒì„±ìë‚˜ ë¶€ ìƒì„±ìë¥¼ ì •ì˜í•  ë•Œ ì‚¬ìš©í•œë‹¤.
    - init í‚¤ì›Œë“œëŠ” ì´ˆê¸°í™” ë¸”ë¡ì„ ì‹œì‘í•œë‹¤.

  ë‹¤ìŒê³¼ ê°™ì´ ê°„ë‹¨íˆ ë‚˜íƒ€ë‚¼ ìˆ˜ ìˆë‹¤. `class User__(val nickname: String)`

  ì—¬ê¸°ì„œ valì€ ì´ íŒŒë¼ë¯¸í„°ì— ìƒì‘í•˜ëŠ” í”„ë¡œí¼í‹°ê°€ ìƒì„±ëœë‹¤ëŠ” ëœ»ì´ë‹¤.

  **ê¸°ë°˜ í´ë˜ìŠ¤ ìƒì„±ì**

  í´ë˜ìŠ¤ì— ê¸°ë°˜ í´ë˜ìŠ¤ê°€ ìˆë‹¤ë©´ ì£¼ ìƒì„±ìì—ì„œ ê¸°ë°˜ í´ë˜ìŠ¤ì˜ ìƒì„±ìë¥¼ í˜¸ì¶œí•´ì•¼í•  í•„ìš”ê°€ ìˆë‹¤.

  ê¸°ë°˜ í´ë˜ìŠ¤ë¥¼ ì´ˆê¸°í™”í•˜ë ¤ë©´ ê¸°ë°˜ í´ë˜ìŠ¤ ì´ë¦„ ë’¤ì— ê´„í˜¸ë¥¼ ì¹˜ê³  ìƒì„±ì ì¸ìë¥¼ ë„˜ê¸´ë‹¤.

    ```kotlin
    open class User(val nickname: String){
        fun getSettingName() = nickname
    }
    
    class TwitterUser(nickname: String) : User(nickname){}
    
    fun main(args: Array<String>) {
        val twitterUser = TwitterUser("ysp")
    		println(twitterUser.getSettingName())
    }
    ```

  ë°˜ë©´, ì¸í„°í˜ì´ìŠ¤ëŠ” ìƒì„±ìê°€ ì—†ê¸° ë•Œë¬¸ì— ì–´ë–¤ í´ë˜ìŠ¤ê°€ ì¸í„°í˜ì´ìŠ¤ë¥¼ êµ¬í˜„í•˜ëŠ” ê²½ìš° ê·¸ í´ë˜ìŠ¤ì˜ ìƒìœ„ í´ë˜ìŠ¤ ëª©ë¡ì— ìˆëŠ” ì¸í„°í˜ì´ìŠ¤ ì´ë¦„ ë’¤ì—ëŠ” ì•„ë¬´ ê´„í˜¸ë„ ì—†ë‹¤.


# ì¸í„°í˜ì´ìŠ¤ì— ì„ ì–¸ëœ í”„ë¡œí¼í‹° êµ¬í˜„

ì½”í‹€ë¦°ì—ì„œëŠ” ì¸í„°í˜ì´ìŠ¤ì— ì¶”ìƒ í”„ë¡œí¼í‹° ì„ ì–¸ì„ ë„£ì„ ìˆ˜ ìˆë‹¤.

```kotlin
interface User{
    val nickname: String
}

class PrivateUser(override val nickname: String) : User3
class SubscribingUser(val email: String) : User3{
    override val nickname: String
        get() = email.substringBefore('@')
}
class FacebookUser(val accountId: Int) : User3{
    override val nickname: getFacebookName(accountId)
}
```

- ì¸í„°í˜ì´ìŠ¤ì— ìˆëŠ” í”„ë¡œí¼í‹° ì„ ì–¸ì—ëŠ” ë’·ë°›ì¹¨í•˜ëŠ” í•„ë“œë‚˜ ê²Œí„° ë“±ì˜ ì •ë³´ê°€ ì—†ë‹¤. ìƒíƒœë¥¼ ì €ì¥í•  í•„ìš”ê°€ ìˆë‹¤ë©´ ì¸í„°í˜ì´ìŠ¤ë¥¼ êµ¬í˜„í•œ í•˜ìœ„ í´ë˜ìŠ¤ì—ì„œ ìƒíƒœ ì €ì¥ì„ ìœ„í•œ í”„ë¡œí¼í‹° ë“±ì„ ë§Œë“¤ì–´ì•¼ í•œë‹¤.
- ì¸í„°í˜ì´ìŠ¤ì—ëŠ” ì¶”ìƒ í”„ë¡œí¼í‹°ë¿ ì•„ë‹ˆë¼ ê²Œí„°ì™€ ì„¸í„°ê°€ ìˆëŠ” í”„ë¡œí¼í‹°ë¥¼ ì„ ì–¸í•  ìˆ˜ ìˆë‹¤.

```kotlin
interface User{
    val email: String
    val nickname: String
    get() = email.substringBefore('@')
}
```

User Interfaceë¥¼ êµ¬í˜„í•˜ëŠ” í´ë˜ìŠ¤ëŠ” ì¶”ìƒí”„ë¡œí¼í‹° emailì„ ë°˜ë“œì‹œ ì˜¤ë²„ë¼ì´ë“œ í•´ì•¼í•˜ì§€ë§Œ, nicknameì€ ì˜¤ë²„ë¼ì´ë“œ í•˜ì§€ ì•Šì•„ë„ ëœë‹¤.

# ë°ì´í„° í´ë˜ìŠ¤ì™€ í´ë˜ìŠ¤ ìœ„ì„ (ì»´íŒŒì¼ëŸ¬ê°€ ìƒì„±í•œ ë©”ì†Œë“œ)

ì½”í‹€ë¦° ì»´íŒŒì¼ëŸ¬ëŠ” ë°ì´í„° í´ë˜ìŠ¤ì— ìœ ìš©í•œ ë©”ì†Œë“œë¥¼ ìë™ìœ¼ë¡œ ë§Œë“¤ì–´ì¤€ë‹¤. ê·¸ë¦¬ê³  í´ë˜ìŠ¤ ìœ„ì„íŒ¨í„´ì„ ê°„ë‹¨í•˜ê²Œ ì“¸ ìˆ˜ ìˆë‹¤.

- ë¬¸ìì—´ í‘œí˜„ : toString()
- ê°ì²´ì˜ ë™ë“±ì„± : equals()
- í•´ì‹œ ì»¨í…Œì´ë„ˆ : hashCode() ê°€ ìˆë‹¤.

ëŒ€ê·œëª¨ ê°ì²´ì§€í–¥ ì‹œìŠ¤í…œì„ ì„¤ê³„í• ë•Œ ì‹œìŠ¤í…œì„ ì·¨ì•½í•˜ê²Œ ë§Œë“œëŠ” ë¬¸ì œëŠ” ë³´í†µ êµ¬í˜„ ìƒì†ì— ì˜í•´ ë°œìƒí•œë‹¤. ìƒì†ì„ í—ˆìš©í•˜ì§€ ì•Šìœ¼ë©´ì„œ í´ë˜ìŠ¤ì— ìƒˆë¡œìš´ ë™ì‘ì„ ì¶”ê°€í•´ì•¼ í• ë•Œê°€ ìˆë‹¤. ì´ëŸ´ë•Œ ì‚¬ìš©í•˜ëŠ” ì¼ë°˜ì ì¸ ë°©ë²•ì´ Decroator íŒ¨í„´ì´ë‹¤.

DecoratoríŒ¨í„´ì˜ í•µì‹¬ì€ ìƒì†ì„ í—ˆìš©í•˜ì§€ ì•ŠëŠ” í´ë˜ìŠ¤(ê¸°ì¡´ í´ë˜ìŠ¤) ëŒ€ì‹  ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” ìƒˆë¡œìš´ í´ë˜ìŠ¤(ë°ì½”ë ˆì´í„°)ë¥¼ ë§Œë“¤ë˜ ê¸°ì¡´ í´ë˜ìŠ¤ì™€ ê°™ì€ ì¸í„°í˜ì´ìŠ¤ë¥¼ ë°ì½”ë ˆì´í„°ê°€ ì œê³µí•˜ê²Œ ë§Œë“¤ê³ , ê¸°ì¡´ í´ë˜ìŠ¤ë¥¼ ë°ì½”ë ˆì´í„° ë‚´ë¶€ì— í•„ë“œë¡œ ìœ ì§€í•˜ëŠ” ê²ƒì´ë‹¤. ë°ì½”ë ˆì´í„° íŒ¨í„´ ì˜ˆ)

```java
public abstract class Beverage {
    String description = "no-name";

    public String getDescription(){
        return description;
    }
    public abstract double cost();
}

```

```java
public abstract class CondimentDecorator extends Beverage{
    public abstract String getDescription();
}

```

```java
public class Espresso extends Beverage{

    public Espresso(){
        description = "Espresso";
    }

    @Override
    public double cost() {
        return 1.99;
    }
}

```

```java
public class Mocha extends CondimentDecorator{
    Beverage beverage;

    public Mocha(Beverage beverage){
        this.beverage = beverage;
    }

    @Override
    public String getDescription() {
        return beverage.getDescription() + ", mocha";
    }

    @Override
    public double cost() {
        return .20 + beverage.cost();
    }
}

```

```java
public class StarbuzzCoffee {
    public static void main(String[] args) {
        Beverage beverage = new Espresso();
        beverage = new Mocha(beverage);
        System.out.println(beverage.getDescription() + " " + beverage.cost());
    }
}
```

### kotlin by ì‚¬ìš©ì˜ˆ

```kotlin
class CountingSet<T>(
    val innerSet: MutableCollection<T> = HashSet<T>()
) : MutableCollection<T> by innerSet {
    var objectsAdded = 0
    override fun add(element: T) : Boolean {
        objectsAdded++
        return innerSet.add(element)
    }
    override fun addAll(c:Collection<T>) : Boolean{
        objectsAdded += c.size
        return innerSet.addAll(c)
    }
}

fun main(args: Array<String>){
    val cast = CountingSet<Int>()
    cast.addAll(listOf(1, 1, 2))
		println("${cast.objectsAdded} objects were added, ${cast.size} remain")
}
```

# object í‚¤ì›Œë“œ : í´ë˜ì„œ ì„ ì–¸ê³¼ ì¸ìŠ¤í„´ìŠ¤ ìƒì„±

ì½”í‹€ë¦°ì—ì„œ object í‚¤ì›Œë“œë¥¼ ì‚¬ìš©í•˜ëŠ” ê²½ìš°

- ê°ì²´ ì„ ì–¸(object declaration)ì€ ì‹±ê¸€í„´ì„ ì •ì˜í•˜ëŠ” ë°©ë²• ì¤‘ í•˜ë‚˜ë‹¤.
- ë™ë°˜ê°ì²´(companion object)ëŠ” ì¸ìŠ¤í„´ìŠ¤ ë©”ì†Œë“œëŠ” ì•„ë‹ˆì§€ë§Œ ì–´ë–¤ í´ë˜ìŠ¤ì™€ ê´€ë ¨ ìˆëŠ” ë©”ì†Œë“œì™€ íŒ©í† ë¦¬ ë©”ì†Œë“œë¥¼ ë‹´ì„ ë•Œ ì“°ì¸ë‹¤. ë™ë°˜ ê°ì²´ ë©”ì†Œë“œì— ì ‘ê·¼í•  ë•ŒëŠ” ë™ë°˜ ê°ì²´ê°€ í¬í•¨ëœ í´ë˜ìŠ¤ì˜ ì´ë¦„ì„ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.
- ê°ì²´ ì‹ì€ ìë°”ì˜ ë¬´ëª… ë‚´ë¶€ í´ë˜ìŠ¤(annonymous inner class) ëŒ€ì‹  ì“°ì¸ë‹¤.

**ì½”í‹€ë¦°ì—ì„œëŠ” ê°ì²´ ì„ ì–¸ ê¸°ëŠ¥ì„ í†µí•´ ì‹±ê¸€í„´ì„ ê¸°ë³¸ ì§€ì›í•œë‹¤. ê°ì²´ ì„ ì–¸ì€ í´ë˜ìŠ¤ ì„ ì–¸ê³¼ ê·¸ í´ë˜ìŠ¤ì— ì†í•œ ë‹¨ì¼ ì¸ìŠ¤í„´ìŠ¤ì˜ ì„ ì–¸ì„ í•©ì¹œ ì„ ì–¸ì´ë‹¤. ê°ì²´ ì„ ì–¸ì€ object í‚¤ì›Œë“œë¡œ ì‹œì‘í•œë‹¤. ìƒì„±ìëŠ”(ì£¼ ìƒì„±ìì™€ ë¶€ ìƒì„±ì ëª¨ë‘) ê°ì²´ ì„ ì–¸ì— ì“¸ ìˆ˜ ì—†ë‹¤.**

```kotlin
data class Person(val name: String, var salary:Float)

object Payroll {
    val allEmployees =arrayListOf<Person>()

    fun showSalary(){
        for (person in allEmployees){
						println(person.salary)
        }
    }
}

fun main(args: Array<String>){
    Payroll.allEmployees.add(Person("ysp", 3500.0f))
    Payroll.allEmployees.add(Person("abc", 3500.0f))
    Payroll.showSalary()
}
```

- ê°ì²´ ì„ ì–¸ë„ í´ë˜ìŠ¤ë‚˜ ì¸í„°í˜ì´ìŠ¤ë¥¼ ìƒì†í•  ìˆ˜ ìˆë‹¤.
- í´ë˜ìŠ¤ ì•ˆì—ì„œ ê°ì²´ë¥¼ ì„ ì–¸í•  ìˆ˜ ìˆë‹¤. ê·¸ëŸ° ê°ì²´ë„ ì¸ìŠ¤í„´ìŠ¤ëŠ” ë‹¨ í•˜ë‚˜ ë¿ì´ë‹¤.

```kotlin
data class Person2(val name: String){
    object NameComparator : Comparator<Person2>{
        override fun compare(o1: Person2, o2: Person2): Int =
            o1.name.compareTo(o2.name)
    }
}
```

# ë™ë°˜ ê°ì²´ : íŒ©í† ë¦¬ ë©”ì†Œë“œì™€ ì •ì  ë©¤ë²„ê°€ ë“¤ì–´ê°ˆ ì¥ì†Œ

ì½”í‹€ë¦° í´ë˜ìŠ¤ ì•ˆì—ëŠ” ì •ì ì¸ ë©¤ë²„ê°€ ì—†ë‹¤. ì½”í‹€ë¦° ì–¸ì–´ëŠ” ìë°” static í‚¤ì›Œë“œë¥¼ ì§€ì› ì•ŠëŠ”ë‹¤. ê·¸ ëŒ€ì‹  ì½”í‹€ë¦°ì—ì„œëŠ” **íŒ¨í‚¤ì§€ ìˆ˜ì¤€ì˜ ìµœìƒìœ„ í•¨ìˆ˜**(ìë°”ì˜ ì •ì  ë©”ì†Œë“œ ì—­í• ì„ ê±°ì˜ ëŒ€ì‹  í•  ìˆ˜ ìˆë‹¤)ì™€ **ê°ì²´ ì„ ì–¸**(ìë°”ì˜ ì •ì  ë©”ì†Œë“œ ì—­í•  ì¤‘ ì½”í‹€ë¦° ìµœìƒìœ„ í•¨ìˆ˜ê°€ ëŒ€ì‹ í•  ìˆ˜ ì—†ëŠ” ì—­í• ì´ë‚˜ ì •ì  í•„ë“œë¥¼ ëŒ€ì‹ í•  ìˆ˜ ìˆë‹¤)ì„ í™œìš©í•œë‹¤. í´ë˜ìŠ¤ ë‚´ë¶€ ì •ë³´ì— ì ‘ê·¼í•´ì•¼ í•˜ëŠ” í•¨ìˆ˜ê°€ í•„ìš”í•  ë•ŒëŠ” í´ë˜ìŠ¤ì— ì¤‘ì²©ëœ ê°ì²´ ì„ ì–¸ì˜ ë©¤ë²„ í•¨ìˆ˜ë¡œ ì •ì˜í•´ì•¼ í•œë‹¤. ê·¸ëŸ° í•¨ìˆ˜ì˜ ëŒ€í‘œì ì¸ ì˜ˆë¡œ íŒ©í† ë¦¬ ë©”ì†Œë“œë¥¼ ë“¤ ìˆ˜ ìˆë‹¤.

íŒ©í† ë¦¬ ë©”ì„œë“œ(íŒ©í† ë¦¬ íŒ¨í„´)

- ìƒì„±ìë¡œ ì§ì ‘ ê°ì²´ë¥¼ ìƒì„±í•˜ëŠ” ê²ƒì´ ì•„ë‹ˆë¼ ë©”ì†Œë“œë¥¼ í†µí•´ ê°ì²´ë¥¼ ìƒì„±í•œë‹¤.
- ê°ì²´ë¥¼ ë§Œë“¤ì–´ë‚´ëŠ” ë¶€ë¶„ì„ ì„œë¸Œí´ë˜ìŠ¤ì— ìœ„í•¨í•˜ëŠ” íŒ¨í„´ì´ë¼ê³ ë„ ì •ì˜í•œë‹¤.
- ê°ì²´ë¥¼ ë§Œë“¤ì–´ë‚´ëŠ” íŒ©í† ë¦¬ë¥¼ ë§Œë“œëŠ” íŒ¨í„´

í´ë˜ìŠ¤ ì•ˆì— ì •ì˜ëœ ê°ì²´ì¤‘ í•˜ë‚˜ì— companionì´ë¼ëŠ” íŠ¹ë³„í•œ í‘œì‹œë¥¼ ë¶™ì´ë©´ ê·¸ í´ë˜ìŠ¤ì˜ ë™ë°˜ ê°ì²´ë¡œ ë§Œë“¤ ìˆ˜ ìˆë‹¤. ë™ë°˜ ê°ì²´ì˜ í”„ë¡œí¼í‹°ë‚˜ ë©”ì†Œë“œì— ì ‘ê·¼í•˜ë ¤ë©´ ê·¸ ë™ë°˜ ê°ì²´ê°€ ì •ì˜ëœ í´ë˜ìŠ¤ ì´ë¦„ì„ ì‚¬ìš©í•œë‹¤.

ë™ë°˜ ê°ì²´ê°€ private ìƒì„±ìë¥¼ í˜¸ì¶œí•˜ê¸° ì¢‹ë‹¤. ë™ë°˜ ê°ì²´ëŠ” ìì‹ ì„ ë‘˜ëŸ¬ì‹¼ í´ë˜ìŠ¤ì˜ ëª¨ë“  private ë©¤ë²„ì— ì ‘ê·¼í•  ìˆ˜ ìˆë‹¤. ë”°ë¼ì„œ ë™ë°˜ ê¹¨ì²´ëŠ” ë°”ê¹¥ìª½ í´ë˜ìŠ¤ì˜ private ìƒì„±ìë„ í˜¸ì¶œí•  ìˆ˜ ìˆë‹¤. ë”°ë¼ì„œ ë™ë°˜ê°ì²´ëŠ” íŒ©í† ë¦¬ íŒ¨í„´ì„ êµ¬í˜„í•˜ê¸° ê°€ì¥ ì í•©í•œ ìœ„ì¹˜ë‹¤.

- ë™ë°˜ ê°ì²´ ì•ˆì— ìƒì„±ìë¥¼ í˜¸ì¶œí•˜ëŠ” íŒ©í† ë¦¬ ë©”ì†Œë“œë¥¼ ì •ì˜í•  ìˆ˜ ìˆëŠ”ë°, ì´ë•Œ privateì¸ ìƒì„±ìê¹Œì§€ í˜¸ì¶œí•  ìˆ˜ ìˆë‹¤.

```kotlin
class User private constructor(val nickname: String){
    companion object{
        fun newSubscribingUser(email:String) = User(email.substringBefore('@'))
        fun newFacebookUser(accountId: Int) = User(getFacebookName(accountId))
    }
}
```

# ë™ë°˜ ê°ì²´ë¥¼ ì¼ë°˜ ê°ì²´ì²˜ëŸ¼ ì‚¬ìš©

ë™ë°˜ ê°ì²´ëŠ” í´ë˜ìŠ¤ ì•ˆì— ì •ì˜ëœ ì¼ë°˜ ê°ì²´ë‹¤. ë”°ë¼ì„œ ë™ë°˜ ê°ì²´ì— ì´ë¦„ì„ ë¶™ì´ê±°ë‚˜, ë™ë°˜ ê°ì²´ê°€ ì¸í„°í˜ì´ìŠ¤ë¥¼ ìƒì†í•˜ê±°ë‚˜, ë™ë°˜ ê°ì²´ ì•ˆì— í™•ì¥ í•¨ìˆ˜ì™€ í”„ë¡œí¼í‹°ë¥¼ ì •ì˜í•  ìˆ˜ ìˆë‹¤.

```kotlin
class User private constructor(val nickname: String){
    companion object func{
        fun newSubscribingUser(email:String) = User(email.substringBefore('@'))
        fun newFacebookUser(accountId: Int) = User(getFacebookName(accountId))
    }
}

fun main(args:Array<String>){
    User.func.newFacebookUser(12)
}
```

```kotlin
interface JSONFactory<T>{
    fun fromJSON(jsonText: String): T
}

class Person(val name: String){
    companion object : JSONFactory<Person>{
        override fun fromJSON(jsonText: String): Person
        = ...
    }
}
```

# ë™ë°˜ê°ì²´ í™•ì¥

ë³´í†µ í™•ì¥í•¨ìˆ˜ì²˜ëŸ¼ ë™ë°˜ ê°ì²´ë„ í™•ì¥í•¨ìˆ˜ë¥¼ ë§Œë“¤ ìˆ˜ ìˆë‹¤.

```kotlin
fun Person.Companion.fromJSON(json: String) : Person{
    ...
}
```

# ê°ì²´ ì‹ : ë¬´ëª… ë‚´ë¶€ í´ë˜ìŠ¤ë¥¼ ë‹¤ë¥¸ ë°©ì‹ìœ¼ë¡œ ì‘ì„±

object í‚¤ì›Œë“œëŠ” ë¬´ëª… ê°ì²´ë¥¼ ì •ì˜í•  ë•Œë„ ì“´ë‹¤. ë¬´ëª… ê°ì²´ëŠ” ìë°”ì˜ ë¬´ëª… ë‚´ë¶€ í´ë˜ìŠ¤ë¥¼ ëŒ€ì‹ í•œë‹¤. ê°ì²´ ì„ ì–¸ê³¼ ë‹¬ë¦¬ ë¬´ëª… ê°ì²´ëŠ” ì‹±ê¸€í„´ì´ ì•„ë‹ˆë‹¤. ê°ì²´ ì‹ì´ ì“°ì¼ ë•Œë§ˆë‹¤ ìƒˆë¡œìš´ ì¸ìŠ¤í„´ìŠ¤ê°€ ìƒì„±ëœë‹¤. ê°ì²´ì„ ì–¸ê³¼ ìœ ì¼í•œ ì°¨ì´ëŠ” ê°ì²´ ì´ë¦„ì´ ë¹ ì¡Œë‹¤ëŠ” ì ì´ë‹¤. ê·¸ í´ë˜ìŠ¤ë‚˜ ì¸ìŠ¤í„´ìŠ¤ì— ì´ë¦„ì„ ë¶™ì´ì§€ëŠ” ì•ŠëŠ”ë‹¤.

ë¬´ëª… ê°ì²´ëŠ” ë‹¤ìŒì˜ í˜•ì‹ì„ í†µí•´ ë§Œë“¤ ìˆ˜ ìˆë‹¤.

object : [ì¸í„°í˜ì´ìŠ¤ ëª…]{

[ì¸í„°í˜ì´ìŠ¤ì—ì„œ êµ¬í˜„í•´ì•¼ í•˜ëŠ” ë©”ì†Œë“œ]

}

```kotlin
interface ButtonClickListener{
    fun onButtonClicked();
}

class Button(private val buttonClickListener: ButtonClickListener){
    fun buttonClickCallback(){
        buttonClickListener.onButtonClicked()
    }
}

~~class PushButtonClickListener : ButtonClickListener{
    override fun onButtonClicked() =println("Button Click!")
}~~

fun main(args:Array<String>){
    Button(object : ButtonClickListener{
        override fun onButtonClicked() {
						println("Button Click!")
        }
    }).buttonClickCallback()
}
```
